---
kind: article
title: Quickie - VMware Fusion VMs von der Kommandozeile steuern und überwachen
created_at: 2012-03-27
author: Christoph Leygraf
---

<p>VMware Workstation kommt mit dem sehr praktische Kommando <code>vmrun</code>, mit dem man VMs auf der Kommandozeile starten, stoppen, Snapshots erstellen und vieles mehr machen kann. Und wie sieht's bei VMware Fusion aus?</p><p><!--break--></p><p>Unter LINUX ist dieses Kommando automatisch im Pfad (natürlich nur, wenn VMware Workstation installiert ist), sodass ein <code><span dir="rtl">vmrun -T ws list</span></code> genügt, um sich alle laufenden VMs auflisten zu lassen. Bei VMware Fusion muss man dagegen den vollständigen Pfad zur <code>vmrun</code> mit angeben:</p><p style="text-align: left; "><code>Christophs-MacBook-Pro:~ cleygraf$ /Applications/VMware\ Fusion.app/Contents/Library/vmrun -T ws list</code></p><p style="text-align: left; "><code>Total running VMs: 0<br>Christophs-MacBook-Pro:~ cleygraf$</code></p><p>&nbsp;</p><p>Die Snapshots ein VM (diese muss nicht laufen, es muss lediglich die VMX-Datei mit angegeben werden und VMware Fusion muss nicht gestartet sein) lassen sich auf einem Mac dann so anzeigen:</p><div style="text-align: left; "><code>Christophs-MacBook-Pro:~ cleygraf$ /Applications/VMware\ Fusion.app/Contents/Library/vmrun -T ws listSnapshots /Users/cleygraf/Documents/Virtuelle\ Maschinen/nas.lab.leyux.org.vmwarevm/nas.lab.leyux.org.vmx</code></div><div style="text-align: left; "><code>Total snapshots: 1</code></div><div style="text-align: left; "><code>Klone vom Template</code></div><div style="text-align: left; "><code>Christophs-MacBook-Pro:~ cleygraf$</code></div><div style="text-align: left; ">&nbsp;</div><div style="text-align: left; ">&nbsp;</div><div style="text-align: left; ">In <a href="http://evernote.com/" target="_blank">Evernote</a> habe ich eine Notiz, in der ich alle wichtigen <code>vmrun</code>-Kommandos gespeichert habe. Zusätzlich nutze ich eine lokale Textdatei&nbsp;<span style="font-family: 'Courier New', 'DejaVu Sans Mono', monospace; font-size: 20px; ">~/vms.txt</span>&nbsp;auf den Systemen mit VMware Workstation, die alle auf diesem System relevanten VMs beinhaltet. Die VMs kann ich dann pauschal starten, stoppen etc. (früher gab's die Funktion <em>Team</em> in VMware Workstation, die auf der GUI ähnliches möglich machte):</div><ul><li style="text-align: left; ">Anlegen von&nbsp;<span style="font-family: 'Courier New', 'DejaVu Sans Mono', monospace; font-size: 18px; "><code>~/vms.txt</code>:</span></li><li style="text-align: left; ">Starten der VMs in&nbsp;<span style="font-family: 'Courier New', 'DejaVu Sans Mono', monospace; font-size: 20px; ">~/vms.txt</span>:<br><code>for i in $(cat ~/vms.txt); do&nbsp;echo -e " $i:";&nbsp; vmrun&nbsp;-T ws start $i nogui; done</code></li><li style="text-align: left; ">Stoppen der VMs&nbsp;<span style="font-family: 'Courier New', 'DejaVu Sans Mono', monospace; font-size: 20px; ">~/vms.txt</span>:<br><code>for i in $(cat ~/vms.txt); do&nbsp;echo -e " $i:";&nbsp; vmrun&nbsp;-T ws stop $i soft; done</code></li><li style="text-align: left; ">Auflisten der Snapshots aller VMs in&nbsp;<span style="font-family: 'Courier New', 'DejaVu Sans Mono', monospace; font-size: 20px; ">~/vms.txt:</span><span style="font-family: 'Courier New', 'DejaVu Sans Mono', monospace; font-size: 20px; ">for i in $(cat ~/vms.txt); do echo -e " $i:"; vmrun&nbsp;-T ws listSnapshots&nbsp;$i; done</span></li><li style="text-align: left; ">Lege für alle VMs in&nbsp;<span style="font-family: 'Courier New', 'DejaVu Sans Mono', monospace; font-size: 20px; ">~/vms.txt</span>&nbsp;einen neuen Snapshot an:<br><code>for i in $(cat ~/vms.txt); do echo -e " $i:"; vmrun&nbsp;-T ws&nbsp;snapshot&nbsp;$i $(date +%y-%m-%d_%H:%M); done</code></li></ul>
